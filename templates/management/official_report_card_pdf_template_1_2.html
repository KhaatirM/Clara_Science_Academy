<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>1st-2nd Grade Progress Report - Clara Science Academy</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='report_card_styles.css', _external=True) }}">
</head>
<body>
    {% include 'management/_report_card_header.html' %}

    <p class="report-period-line"><strong>Report Period:</strong> {{ report_card.quarter }} - {{ generated_date.strftime('%B %d, %Y') if generated_date else 'N/A' }}</p>

    <div class="section-title">ATTENDANCE:</div>
    <table>
        <thead>
            <tr>
                <th>&nbsp;</th>
                <th>1st Q</th>
                <th>2nd Q</th>
                <th>3rd Q</th>
                <th>4th Q</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>Excused Absences</td><td></td><td></td><td></td><td></td></tr>
            <tr><td>Unexcused Absences</td><td></td><td></td><td></td><td></td></tr>
        </tbody>
    </table>

    <div class="section-title">Academic Standards:</div>
    <p>The Clara Science Academy (CSA) reports student performance quarterly. This 1st/2nd grade progress report lists the skills outlined by the NC Department of Education Standards. This framework provides guidance about what a 1st/2nd grade student should know or be able to do. The K12 curriculum is the core set of courses used by CSA to help 1st/2nd grade students meet these standards. Individualized goals are set for each student. The teacher and learning coach determine the percentage of course completion necessary to meet the academic goals for the first/second-grade student based on the standards and anchors. The year-to-date course progress reflects the progress towards meeting standards as well as academic goals related to course completion. The decision to promote a student to the next level is determined by the teacher.</p>

    <div class="section-title">Year-to-date Course Progress:</div>
    <table>
        <thead>
            <tr>
                <th>Course</th>
                <th>Comment(s)</th>
            </tr>
        </thead>
        <tbody>
            {% if class_objects %}
                {% for class_obj in class_objects %}
                    {% if grades %}
                        {% set class_grades = {} %}
                        {% for subject, grade_info in grades.items() %}
                            {% if grade_info is mapping %}
                                {% set percentage = grade_info.get('percentage', grade_info.get('average', 0)) %}
                                {% set letter_grade = grade_info.get('letter', 'N/A') %}
                            {% else %}
                                {% set percentage = grade_info if grade_info is number else 0 %}
                                {% set letter_grade = 'N/A' %}
                            {% endif %}
                            {% if not class_grades %}
                                {% set _ = class_grades.update({subject: {'percentage': percentage, 'letter': letter_grade}}) %}
                            {% endif %}
                        {% endfor %}
                        {% if class_grades %}
                            {% set first_grade = class_grades.values() | first %}
                            <tr>
                                <td>{{ class_obj.name }} ({{ class_obj.subject or 'N/A' }})</td>
                                <td>Overall performance: {{ first_grade.letter }} ({{ "%.1f"|format(first_grade.percentage) }}%)</td>
                            </tr>
                        {% else %}
                            <tr>
                                <td>{{ class_obj.name }} ({{ class_obj.subject or 'N/A' }})</td>
                                <td>Overall performance: N/A</td>
                            </tr>
                        {% endif %}
                    {% else %}
                        <tr>
                            <td>{{ class_obj.name }} ({{ class_obj.subject or 'N/A' }})</td>
                            <td>Overall performance: N/A</td>
                        </tr>
                    {% endif %}
                {% endfor %}
            {% else %}
                {% if grades %}
                    {% for subject, grade_info in grades.items() %}
                        {% if grade_info is mapping %}
                            {% set percentage = grade_info.get('percentage', grade_info.get('average', 0)) %}
                            {% set letter_grade = grade_info.get('letter', 'N/A') %}
                        {% else %}
                            {% set percentage = grade_info if grade_info is number else 0 %}
                            {% set letter_grade = 'N/A' %}
                        {% endif %}
                        <tr>
                            <td>{{ subject }}</td>
                            <td>Overall performance: {{ letter_grade }} ({{ "%.1f"|format(percentage) }}%)</td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr><td>No grade data available</td><td></td></tr>
                {% endif %}
            {% endif %}
            <tr><td>Writing</td><td></td></tr>
            <tr><td>Language Arts 1</td><td></td></tr>
            <tr><td>Math 1</td><td></td></tr>
            <tr><td>Science 1</td><td></td></tr>
            <tr><td>Social Studies</td><td></td></tr>
            <tr><td>Art/Music 1</td><td></td></tr>
            <tr><td>Physical Education 1</td><td></td></tr>
        </tbody>
    </table>

    <div class="section-title">Standards Checklist:</div>
    <p>M: Met academic standard | NA: Not Assessed during this semester | W: Working towards meeting academic standard | UA: Unable to Assess during this semester</p>

    <div class="section-title">Language Arts</div>
    <table>
        <thead>
            <tr>
                <th>Standard Description</th>
                <th>1st Q</th>
                <th>2nd Q</th>
                <th>3rd Q</th>
                <th>4th Q</th>
            </tr>
        </thead>
        <tbody>
            <tr class="sub-section-title"><td colspan="5">LEARNING TO READ INDEPENDENTLY</td></tr>
            <tr>
                <td>Demonstrate concept of print, how print is organized and used in reading and writing tasks...</td>
                <td>{% if report_card.quarter == 'Q1' %}✓{% else %}{% endif %}</td>
                <td>{% if report_card.quarter == 'Q2' %}✓{% else %}{% endif %}</td>
                <td>{% if report_card.quarter == 'Q3' %}✓{% else %}{% endif %}</td>
                <td>{% if report_card.quarter == 'Q4' %}✓{% else %}{% endif %}</td>
            </tr>
            <tr>
                <td>Demonstrate phonemic awareness, the ability to hear and manipulate sounds in spoken words...</td>
                <td></td><td></td><td></td><td></td>
            </tr>
        </tbody>
    </table>

    <div class="section-title">Math</div>
    <table>
        <thead>
            <tr>
                <th>Standard Description</th>
                <th>1st Q</th>
                <th>2nd Q</th>
                <th>3rd Q</th>
                <th>4th Q</th>
            </tr>
        </thead>
        <tbody>
            <tr class="sub-section-title"><td colspan="5">NUMBERS, NUMBER SYSTEMS AND NUMBER RELATIONSHIPS</td></tr>
            <tr>
                <td>Count using whole numbers to 100 by 1’s, 2’s, 5’s, 10’s and 25’s...</td>
                <td>{% if report_card.quarter == 'Q1' %}✓{% else %}{% endif %}</td>
                <td>{% if report_card.quarter == 'Q2' %}✓{% else %}{% endif %}</td>
                <td>{% if report_card.quarter == 'Q3' %}✓{% else %}{% endif %}</td>
                <td>{% if report_card.quarter == 'Q4' %}✓{% else %}{% endif %}</td>
            </tr>
        </tbody>
    </table>

    <div class="section-title">Teacher Comments:</div>
    <div class="comments-box">
        <p>{% if include_comments and grades %}{{ grades.get('comments', 'N/A')|nl2br }}{% else %}N/A{% endif %}</p>
    </div>

    <div class="footer">
        <p>Parent Signature: ___________________________________ Date: _________________</p>
        <p>Academy Director: ___________________________________ Date: _________________</p>
    </div>
</body>
</html>
