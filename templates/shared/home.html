{% extends "shared/base.html" %}

{% block title %}
    Welcome - Clara Science Academy
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/home-enhanced.css') }}">
{% endblock %}

{% block content %}
<!-- Slideshow Background -->
<div class="slideshow-container">
    <div class="slideshow-image" style="background-image: url('/static/img/backimg/image1.png');"></div>
    <div class="slideshow-image" style="background-image: url('/static/img/backimg/image2.png');"></div>
    <div class="slideshow-image" style="background-image: url('/static/img/backimg/image3.png');"></div>
    <div class="slideshow-image" style="background-image: url('/static/img/backimg/image4.png');"></div>
    <div class="slideshow-image" style="background-image: url('/static/img/backimg/image5.png');"></div>
    <div class="slideshow-image" style="background-image: url('/static/img/backimg/image6.png');"></div>
    <div class="slideshow-image" style="background-image: url('/static/img/backimg/image7.png');"></div>
    <div class="slideshow-image" style="background-image: url('/static/img/backimg/image8.png');"></div>
    <div class="slideshow-image" style="background-image: url('/static/img/backimg/image9.png');"></div>
    <div class="slideshow-overlay"></div>
</div>

<!-- Floating Particles -->
<div class="particles-container" id="particlesContainer"></div>

<!-- Hero Section -->
<div class="hero-section">
    <div class="container hero-content">
        <div class="hero-text">
            <h1 class="display-4 display-md-3">Empowering Minds, Shaping Futures</h1>
            <p class="lead">
                Welcome to Clara Science Academy's comprehensive student management portal. <br class="d-none d-md-block">
                A centralized hub for academic excellence, seamless administration, and educational innovation.
            </p>
            <div class="hero-features">
                <div class="hero-feature">
                    <i class="fas fa-graduation-cap"></i>
                    <span>Academic Excellence</span>
                </div>
                <div class="hero-feature">
                    <i class="fas fa-users"></i>
                    <span>Community Focus</span>
                </div>
                <div class="hero-feature">
                    <i class="fas fa-chart-line"></i>
                    <span>Data-Driven Results</span>
                </div>
            </div>
            <hr class="my-4 border-color-white-50">
        </div>
        
        {% if current_user.is_authenticated %}
            {% set role_name = current_user.role|lower|replace(' ', '_') %}
            {% if role_name == 'school_administrator' %}
                {% set dashboard_url = url_for('management.management_dashboard') %}
            {% elif role_name == 'director' %}
                {% set dashboard_url = url_for('management.management_dashboard') %}
            {% elif role_name == 'teacher' %}
                {% set dashboard_url = url_for('teacher.teacher_dashboard') %}
            {% elif role_name == 'student' %}
                {% set dashboard_url = url_for('student.student_dashboard') %}
            {% elif role_name == 'tech' %}
                {% set dashboard_url = url_for('tech.tech_dashboard') %}
            {% else %}
                {% set dashboard_url = url_for('auth.dashboard') %}
            {% endif %}
            <div class="hero-actions">
                <p class="mb-3">Welcome back, {{ current_user.username }}! ({{ current_user.role }})</p>
                <div class="hero-buttons">
                    <a class="hero-btn hero-btn-primary" href="{{ dashboard_url }}" role="button">
                        <i class="fas fa-tachometer-alt"></i>Go to Your Dashboard
                    </a>
                    <a class="hero-btn hero-btn-outline" href="{{ url_for('auth.logout') }}" role="button">
                        <i class="fas fa-sign-out-alt"></i>Logout
                    </a>
                </div>
            </div>
        {% else %}
            <div class="hero-actions">
                <p class="mb-3">Access your personalized educational portal</p>
                <div class="hero-buttons">
                    <a class="hero-btn hero-btn-primary" href="{{ url_for('auth.login') }}" role="button">
                        <i class="fas fa-sign-in-alt"></i>Secure Login
                    </a>
                    <button class="hero-btn hero-btn-secondary" data-bs-toggle="modal" data-bs-target="#contactModal">
                        <i class="fas fa-envelope"></i>Contact Us
                    </button>
                </div>
            </div>
        {% endif %}
    </div>
</div>

<!-- About Section -->
<div class="about-section py-5">
    <div class="container">
        <div class="row align-items-center g-5">
            <div class="col-lg-7">
                <h2 class="section-title mb-3 text-start">About Clara Science Academy</h2>
                <div class="section-divider mb-4"></div>
                <p class="lead text-muted mb-4">Excellence in Education Since Our Founding</p>
                <p class="about-text">Clara Science Academy is a premier educational institution dedicated to fostering academic excellence, critical thinking, and scientific inquiry. Our comprehensive curriculum and innovative teaching methods prepare students for success in an ever-evolving world.</p>
                <p class="about-text mb-4">We believe that every student has the potential to achieve greatness when provided with the right tools, guidance, and environment. Our commitment to personalized education ensures that each student receives the attention and support they need to thrive.</p>
                <div class="row g-3 mt-4">
                    <div class="col-6">
                        <div class="modern-stat-box">
                            <div class="stat-icon-wrapper">
                                <i class="fas fa-user-graduate"></i>
                            </div>
                            <div class="stat-content-wrapper">
                                <h3 class="stat-number">150<span class="stat-plus">+</span></h3>
                                <p class="stat-label">Students Enrolled</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="modern-stat-box">
                            <div class="stat-icon-wrapper stat-icon-green">
                                <i class="fas fa-chalkboard-teacher"></i>
                            </div>
                            <div class="stat-content-wrapper">
                                <h3 class="stat-number">25<span class="stat-plus">+</span></h3>
                                <p class="stat-label">Expert Teachers</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-5">
                <div class="about-campus-card">
                    <div class="campus-icon-large">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <h4 class="campus-title">Academy Campus</h4>
                    <p class="campus-subtitle">State-of-the-art facilities designed for modern learning</p>
                    <div class="campus-features">
                        <div class="campus-feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Modern Classrooms</span>
                        </div>
                        <div class="campus-feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Science Labs</span>
                        </div>
                        <div class="campus-feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Technology Centers</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Features Section -->
<div class="features-section">
    <div class="container">
        <div class="row text-center g-4">
            <div class="col-12 mb-5">
                <h2 class="section-title">Why Choose Clara Science Academy?</h2>
                <div class="section-title-glow"></div>
                <p class="section-subtitle">Comprehensive tools and features designed for modern education management</p>
            </div>
            <!-- Feature 1: Student Management -->
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-user-graduate"></i>
                    </div>
                    <h3>Student Management</h3>
                    <p>Easily manage student records, enrollment, and academic progress all in one place with our intuitive dashboard.</p>
                </div>
            </div>
            <!-- Feature 2: Teacher & Class Tools -->
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-chalkboard-teacher"></i>
                    </div>
                    <h3>Teacher & Class Tools</h3>
                    <p>Empower teachers with advanced tools for class management, assignments, grading, and student engagement.</p>
                </div>
            </div>
            <!-- Feature 3: Comprehensive Reporting -->
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-chart-pie"></i>
                    </div>
                    <h3>Comprehensive Reporting</h3>
                    <p>Generate detailed reports for attendance, grades, and overall school performance with real-time analytics.</p>
                </div>
            </div>
            <!-- Feature 4: Advanced Analytics -->
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3>Advanced Analytics</h3>
                    <p>Track student performance trends and identify areas for improvement with data-driven insights and visualizations.</p>
                </div>
            </div>
            <!-- Feature 5: Communication Hub -->
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <h3>Communication Hub</h3>
                    <p>Seamless communication between students, teachers, and parents through integrated messaging and notifications.</p>
                </div>
            </div>
            <!-- Feature 6: Secure Platform -->
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>Secure Platform</h3>
                    <p>Enterprise-grade security ensures student data privacy and platform reliability with advanced encryption.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Programs Section -->
<div class="programs-section py-5">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="section-title">Our Academic Programs</h2>
                <div class="section-title-glow"></div>
                <p class="section-subtitle">Comprehensive curriculum designed to prepare students for future success</p>
            </div>
        </div>
        <div class="row g-4">
            <div class="col-md-6 col-lg-4">
                <div class="program-card">
                    <div class="program-icon">
                        <i class="fas fa-flask"></i>
                    </div>
                    <h4>Science & Technology</h4>
                    <p>Advanced courses in physics, chemistry, biology, and computer science with hands-on laboratory experiences and modern equipment.</p>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="program-card">
                    <div class="program-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <h4>Mathematics</h4>
                    <p>Comprehensive math curriculum from basic arithmetic to advanced calculus, statistics, and problem-solving methodologies.</p>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="program-card">
                    <div class="program-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <h4>Language Arts</h4>
                    <p>Literature, writing, and communication skills development for academic and professional success with creative expression.</p>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="program-card">
                    <div class="program-icon">
                        <i class="fas fa-globe-americas"></i>
                    </div>
                    <h4>Social Sciences</h4>
                    <p>History, geography, civics, and social studies to develop well-rounded global citizens with cultural awareness.</p>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="program-card">
                    <div class="program-icon">
                        <i class="fas fa-code"></i>
                    </div>
                    <h4>Programming</h4>
                    <p>Modern programming languages, software development, web technologies, and computational thinking skills for the digital age.</p>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="program-card">
                    <div class="program-icon">
                        <i class="fas fa-palette"></i>
                    </div>
                    <h4>Arts & Creativity</h4>
                    <p>Visual arts, music, drama, and creative expression to foster imagination and artistic development in our students.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Technology Section -->
<div class="technology-section py-5">
    <div class="container">
        <div class="row align-items-center g-5">
            <div class="col-lg-5">
                <div class="tech-showcase-card">
                    <div class="tech-icon-grid">
                        <div class="tech-icon-item" style="animation-delay: 0.1s;">
                            <i class="fas fa-laptop"></i>
                        </div>
                        <div class="tech-icon-item" style="animation-delay: 0.2s;">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <div class="tech-icon-item" style="animation-delay: 0.3s;">
                            <i class="fas fa-cloud"></i>
                        </div>
                        <div class="tech-icon-item" style="animation-delay: 0.4s;">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                    </div>
                    <div class="tech-showcase-label">
                        <i class="fas fa-rocket me-2"></i>
                        <span>Modern Technology Platform</span>
                    </div>
                </div>
            </div>
            <div class="col-lg-7">
                <h2 class="section-title mb-3 text-start">Cutting-Edge Technology</h2>
                <div class="section-divider mb-4"></div>
                <p class="lead mb-4" style="color: rgba(255, 255, 255, 0.95) !important; font-size: 1.4rem !important; text-shadow: 0 2px 4px rgba(0,0,0,0.3) !important;">Digital Innovation in Education</p>
                <p class="about-text mb-4" style="color: rgba(255, 255, 255, 0.95) !important; font-size: 1.15rem !important; text-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;">Our student management system leverages the latest technology to provide seamless, efficient, and secure educational administration. From real-time attendance tracking to comprehensive grade management, we've integrated modern solutions to enhance the learning experience.</p>
                <ul class="tech-features">
                    <li><i class="fas fa-check-circle"></i> Real-time attendance tracking and monitoring</li>
                    <li><i class="fas fa-check-circle"></i> Digital grade books and automated report cards</li>
                    <li><i class="fas fa-check-circle"></i> Mobile-responsive design for all devices</li>
                    <li><i class="fas fa-check-circle"></i> Secure cloud-based platform with 99.9% uptime</li>
                    <li><i class="fas fa-check-circle"></i> Advanced analytics and performance insights</li>
                    <li><i class="fas fa-check-circle"></i> Integrated communication and notification system</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Community Leadership Section -->
<div class="testimonials-section py-5">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="section-title">Our Leadership Team</h2>
                <div class="section-divider-center mb-4"></div>
                <p class="section-subtitle">Meet the dedicated professionals leading Clara Science Academy</p>
            </div>
        </div>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="testimonial-card modern-testimonial">
                    <div class="quote-icon">
                        <i class="fas fa-quote-left"></i>
                    </div>
                    <div class="testimonial-content">
                        <p>"Leading Clara Science Academy with a vision for educational excellence and innovation. We are committed to providing the best learning environment for our students and preparing them for future success."</p>
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <div class="author-info">
                            <h5>Omar. P</h5>
                            <p>Board of Directors</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="testimonial-card modern-testimonial">
                    <div class="quote-icon">
                        <i class="fas fa-quote-left"></i>
                    </div>
                    <div class="testimonial-content">
                        <p>"As Director, I ensure that every student receives the highest quality education and support. Our comprehensive management system helps us achieve this goal effectively while maintaining personal connections."</p>
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <i class="fas fa-user-shield"></i>
                        </div>
                        <div class="author-info">
                            <h5>Varsty. C</h5>
                            <p>Director</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="testimonial-card modern-testimonial">
                    <div class="quote-icon">
                        <i class="fas fa-quote-left"></i>
                    </div>
                    <div class="testimonial-content">
                        <p>"Technology is the backbone of modern education. Our advanced student management system ensures seamless operations and enhanced learning experiences for all stakeholders in our educational community."</p>
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <i class="fas fa-laptop-code"></i>
                        </div>
                        <div class="author-info">
                            <h5>Khaatir. H</h5>
                            <p>IT Department Head</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Contact Section -->
<div class="contact-section py-5">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="section-title">Contact Clara Science Academy</h2>
                <div class="section-divider-center mb-4"></div>
                <p class="section-subtitle">Get in touch with us for more information</p>
            </div>
        </div>
        <div class="row g-4 mb-5">
            <div class="col-md-6 col-lg-3">
                <div class="contact-card modern-contact">
                    <div class="contact-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <h4>Visit Us</h4>
                    <p class="contact-info-text">3015 East Bessemer Ave.<br>Greensboro, NC 27405</p>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="contact-card modern-contact">
                    <div class="contact-icon contact-icon-phone">
                        <i class="fas fa-phone"></i>
                    </div>
                    <h4>Call Us</h4>
                    <p class="contact-info-text"><a href="tel:1-800-567-5110">1-800-567-5110</a></p>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="contact-card modern-contact">
                    <div class="contact-icon contact-icon-email">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <h4>Email Us</h4>
                    <p class="contact-info-text"><a href="mailto:info@clarascienceacademy.com">info@clarascienceacademy.com</a></p>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="contact-card modern-contact">
                    <div class="contact-icon contact-icon-web">
                        <i class="fas fa-globe"></i>
                    </div>
                    <h4>Visit Website</h4>
                    <p class="contact-info-text"><a href="https://www.clarascienceacademy.com" target="_blank">clarascienceacademy.com</a></p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <div class="modern-office-hours">
                    <div class="office-hours-header">
                        <i class="fas fa-clock"></i>
                        <h4>Office Hours</h4>
                    </div>
                    <div class="office-hours-grid">
                        <div class="office-hours-item">
                            <div class="day-label">Monday - Thursday</div>
                            <div class="time-label">8:00 AM - 3:30 PM</div>
                        </div>
                        <div class="office-hours-item">
                            <div class="day-label">Friday</div>
                            <div class="time-label">8:00 AM - 12:00 PM</div>
                        </div>
                        <div class="office-hours-item closed">
                            <div class="day-label">Saturday & Sunday</div>
                            <div class="time-label">Closed</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Call to Action Section -->
<div class="cta-section py-5">
    <div class="container text-center">
        <div class="row">
            <div class="col-12">
                <h2 class="mb-4">Ready to Get Started?</h2>
                <p class="lead mb-4">Join Clara Science Academy and experience the future of education management.</p>
                {% if not current_user.is_authenticated %}
                <a class="btn btn-light btn-lg me-3" href="{{ url_for('auth.login') }}" role="button">
                    <i class="fas fa-sign-in-alt me-2"></i>Login to Portal
                </a>
                {% endif %}
                <button class="btn btn-outline-light btn-lg me-3" data-bs-toggle="modal" data-bs-target="#contactModal">
                    <i class="fas fa-envelope me-2"></i>Contact Us
                </button>
                <a class="btn btn-outline-light btn-lg" href="https://www.clarascienceacademy.com" target="_blank" role="button">
                    <i class="fas fa-globe me-2"></i>Visit Our Website
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Contact Modal -->
<div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title" id="contactModalLabel">
                    <i class="fas fa-envelope me-2"></i>Contact Clara Science Academy
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
                <div class="row g-4">
                    <!-- Contact Information -->
                    <div class="col-md-6">
                        <h6 class="text-success mb-3">
                            <i class="fas fa-info-circle me-2"></i>Get In Touch
                        </h6>
                        <div class="contact-info">
                            <div class="contact-item mb-3">
                                <div class="contact-icon-wrapper">
                                    <i class="fas fa-map-marker-alt text-success"></i>
                                </div>
                                <div class="contact-details">
                                    <strong>Address</strong><br>
                                    3015 East Bessemer Ave.<br>
                                    Greensboro, NC 27405
                                </div>
                            </div>
                            
                            <div class="contact-item mb-3">
                                <div class="contact-icon-wrapper">
                                    <i class="fas fa-phone text-success"></i>
                                </div>
                                <div class="contact-details">
                                    <strong>Phone</strong><br>
                                    <a href="tel:1-800-567-5110" class="text-decoration-none">1-800-567-5110</a>
                                </div>
                            </div>
                            
                            <div class="contact-item mb-3">
                                <div class="contact-icon-wrapper">
                                    <i class="fas fa-envelope text-success"></i>
                                </div>
                                <div class="contact-details">
                                    <strong>Email</strong><br>
                                    <a href="mailto:info@clarascienceacademy.com" class="text-decoration-none">info@clarascienceacademy.com</a>
                                </div>
                            </div>
                            
                            <div class="contact-item mb-3">
                                <div class="contact-icon-wrapper">
                                    <i class="fas fa-globe text-success"></i>
                                </div>
                                <div class="contact-details">
                                    <strong>Website</strong><br>
                                    <a href="https://www.clarascienceacademy.com" target="_blank" class="text-decoration-none">www.clarascienceacademy.com</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Office Hours -->
                    <div class="col-md-6">
                        <h6 class="text-success mb-3">
                            <i class="fas fa-clock me-2"></i>Office Hours
                        </h6>
                        <div class="office-hours">
                            <div class="hours-item mb-2">
                                <strong>Monday - Thursday:</strong><br>
                                8:00 AM - 3:30 PM
                            </div>
                            <div class="hours-item mb-2">
                                <strong>Friday:</strong><br>
                                8:00 AM - 12:00 PM
                            </div>
                            <div class="hours-item mb-2">
                                <strong>Saturday & Sunday:</strong><br>
                                Closed
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <h6 class="text-success mb-3">
                                <i class="fas fa-user-tie me-2"></i>Leadership Team
                            </h6>
                            <div class="leadership-info">
                                <div class="leader-item mb-2">
                                    <strong>Omar. P</strong><br>
                                    <small class="text-muted">Board of Directors</small>
                                </div>
                                <div class="leader-item mb-2">
                                    <strong>Varsty. C</strong><br>
                                    <small class="text-muted">Principal</small>
                                </div>
                                <div class="leader-item mb-2">
                                    <strong>Khaatir. H</strong><br>
                                    <small class="text-muted">IT Department Head</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="row mt-4">
                    <div class="col-12">
                        <h6 class="text-success mb-3">
                            <i class="fas fa-bolt me-2"></i>Quick Actions
                        </h6>
                        <div class="d-flex flex-wrap gap-2">
                            <a href="mailto:info@clarascienceacademy.com" class="btn btn-success btn-sm">
                                <i class="fas fa-envelope me-1"></i>Send Email
                            </a>
                            <a href="tel:1-800-567-5110" class="btn btn-outline-success btn-sm">
                                <i class="fas fa-phone me-1"></i>Call Now
                            </a>
                            <a href="https://www.clarascienceacademy.com" target="_blank" class="btn btn-outline-success btn-sm">
                                <i class="fas fa-globe me-1"></i>Visit Website
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer bg-light">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Update Modal -->
<div class="modal fade" id="updateModal" tabindex="-1" aria-labelledby="updateModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="updateModalLabel">
                    <i class="fas fa-rocket me-2"></i>Major System Update - Clara Science Academy
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
                <div class="update-intro mb-4">
                    <h6 class="text-primary mb-2">
                        <i class="fas fa-calendar-alt me-2"></i>Latest System Update - November 3, 2025
                    </h6>
                    <p class="text-muted mb-0">Major Phase 2 enhancements complete! We've added voiding systems, enhanced report cards, beautified all management pages, and created student submission capabilities. Here's everything that's new:</p>
                </div>
                
                <div class="update-sections">
                    <!-- Report Card System Enhancements -->
                    <div class="update-section mb-4">
                        <h6 class="text-success mb-3">
                            <i class="fas fa-file-alt me-2"></i>üìÑ Report Card System - Major Upgrades
                        </h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Quarter Grades System:</strong> New QuarterGrade table with auto-refresh every 3 hours, accurate historical grade tracking for all quarters (Q1-Q4)
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>PDF Generation Fixed:</strong> CSS styling now properly applies to PDFs, embedded fonts and images, tighter margins (75% reduction), restored header borders
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Smart Form:</strong> Pre-selects student from category pages, auto-selects current school year, removed quarter dropdown (shows all 4 quarters)
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Report Card History:</strong> View all historical report cards for any student, grouped by school year
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Delete Capability:</strong> Administrators can now delete previously generated report cards
                            </li>
                        </ul>
                    </div>

                    <!-- Assignment Voiding System -->
                    <div class="update-section mb-4">
                        <h6 class="text-warning mb-3">
                            <i class="fas fa-ban me-2"></i>üö´ Assignment Voiding System - NEW!
                        </h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Manual Voiding:</strong> Administrators and teachers can void assignments for all students or specific students
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Automatic Late Enrollment Voiding:</strong> Assignments auto-void for students enrolled within 2 weeks of quarter end or after quarter ended
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Voided Badge:</strong> "Voided" badges replace "Not Graded" for voided assignments in class grades view
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Placeholder Grades:</strong> System creates placeholder voided grades for ungraded assignments to ensure proper UI display
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Quarter Grade Integration:</strong> Voided assignments automatically excluded from quarter grade calculations
                            </li>
                        </ul>
                    </div>

                    <!-- Phase 2: Beautiful UI Enhancements -->
                    <div class="update-section mb-4">
                        <h6 class="text-info mb-3">
                            <i class="fas fa-palette me-2"></i>üé® Phase 2: Modern UI/UX Enhancements
                        </h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Manage Groups:</strong> Gradient stat cards, animated hover effects, search & filter functionality, random gradient group icons
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Group Assignments:</strong> Modern gradient stats, beautiful assignment cards with status badges, enhanced details layout
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Class Groups:</strong> Gradient stat cards, animated group cards with random icons, member badges with gradients
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Deadline Reminders:</strong> Enhanced with gradient stat cards and modern color scheme
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Reports & Analytics:</strong> Gradient headers, enhanced table displays, modern visual design
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>360¬∞ Feedback:</strong> Card-based layout, gradient stats, target student info cards, comprehensive session details
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Reflection Journals:</strong> Card-based layout with student info, rating badges, gradient headers and stats
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Conflict Resolution:</strong> Card layout with severity indicators, status badges, modern action buttons
                            </li>
                        </ul>
                    </div>

                    <!-- Student Submissions Tab -->
                    <div class="update-section mb-4">
                        <h6 class="text-success mb-3">
                            <i class="fas fa-pencil-alt me-2"></i>üìù Student Submissions - NEW TAB!
                        </h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>New Navigation Tab:</strong> "Submissions" tab added to student dashboard between Grades and Schedule
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>360¬∞ Feedback Submission:</strong> Students can submit comprehensive peer feedback with anonymous option
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Reflection Journals:</strong> Submit reflections on group work with collaboration/learning ratings (1-5 stars)
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Conflict Reports:</strong> Report group conflicts with severity levels and detailed descriptions
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Class-Specific Forms:</strong> Only shows assignments/sessions from student's enrolled classes
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Submission History:</strong> Tabbed view showing all past submissions with status tracking
                            </li>
                        </ul>
                    </div>

                    <!-- UI/UX Improvements -->
                    <div class="update-section mb-4">
                        <h6 class="text-primary mb-3">
                            <i class="fas fa-magic me-2"></i>‚ú® UI/UX Improvements
                        </h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Class View:</strong> Fixed blue hover outline, now shows both individual and group assignments with proper status badges
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Assignment Count Badge:</strong> Moved to subject line to prevent overlap with class names
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Teacher Class View:</strong> Compact card layouts, removed excessive heights and blank space, added max-height constraints
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Status Badges:</strong> Fixed assignment status badges to show "Graded," "Active," or "Awaiting Grade" accurately
                            </li>
                        </ul>
                    </div>

                    <!-- Critical Bug Fixes -->
                    <div class="update-section mb-4">
                        <h6 class="text-danger mb-3">
                            <i class="fas fa-bug me-2"></i>üêõ Critical Bug Fixes
                        </h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Student Dashboard Type Error:</strong> Fixed "int + str" error when calculating grade averages
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Student Grades Type Error:</strong> Fixed score calculation errors with proper float conversion
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Reflection Journals URL:</strong> Fixed incorrect endpoint causing 500 errors
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Group Assignment URLs:</strong> Fixed BuildError for group assignment viewing and grading
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>PostgreSQL Type Casting:</strong> Fixed quarter comparison errors with proper string type casting
                            </li>
                        </ul>
                    </div>

                    <!-- Previous Updates -->
                    <div class="update-section mb-4">
                        <h6 class="text-muted mb-3">
                            <i class="fas fa-history me-2"></i>üìÖ Previous Update - October 20, 2025
                        </h6>
                        <p class="small text-muted">Student Dashboard redesign, Administrator tools enhanced, 100+ critical bug fixes</p>
                    </div>

                    <!-- Student Dashboard Complete Redesign -->
                    <div class="update-section mb-4">
                        <h6 class="text-success mb-3">
                            <i class="fas fa-star me-2"></i>üé® Student Dashboard - Complete Visual Overhaul
                        </h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Home Tab Redesign:</strong> Modern purple gradient header with personalized "Welcome Back" message, animated stat cards with gradient icons, profile card, academic goals tracker, quick actions panel, and activity timeline
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Assignments Tab Redesign:</strong> Card-based layout with type-specific icons (PDF, Quiz, Discussion), status badges, filters for status/type/sorting, and modern action buttons
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Classes Tab Redesign:</strong> Beautiful green/teal gradient cards showing class details, teacher info, room numbers, and quick action buttons
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Grades Tab Enhancement:</strong> Enhanced GPA display with purple gradient and modern grade cards with hover effects
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Routing Fix:</strong> Fixed all student tabs to use the correct unified dashboard template instead of separate enhanced templates
                            </li>
                        </ul>
                    </div>

                    <!-- Administrator Enhancements -->
                    <div class="update-section mb-4">
                        <h6 class="text-info mb-3">
                            <i class="fas fa-users-cog me-2"></i>üëî Administrator & Director Tools Enhanced
                        </h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Home Tab Redesign:</strong> Modern gradient header, statistics overview with animated counters, profile card, quick actions grid, notifications panel, and recent activity timeline
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Students Tab Redesign:</strong> Modern header with stat cards, streamlined search/filter, CSV import/export section, toggleable table/card view with modern student cards
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Teachers & Staff Tab Redesign:</strong> Statistics cards, streamlined filters, toggleable table/card-based staff display with hover effects
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Classes Tab Redesign:</strong> Gold gradient header, statistics cards for enrollments/teachers/assignments, modern class cards with action buttons (View, Edit, Roster, Grades, Remove)
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Assignments & Grades Tab:</strong> Purple gradient design with statistics cards and class selection cards. Fixed unique student count calculation to prevent duplicates
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Attendance Tab Redesign:</strong> Pink gradient header with statistics cards and two-column layout for class attendance and quick reports
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Unified Attendance Enhancement:</strong> Complete overhaul with modern pink gradient design, tabbed navigation (School Day, Class Period, Reports), and enhanced class cards
                            </li>
                        </ul>
                    </div>

                    <!-- Critical Bug Fixes -->
                    <div class="update-section mb-4">
                        <h6 class="text-warning mb-3">
                            <i class="fas fa-tools me-2"></i>üîß Critical Bug Fixes
                        </h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Unique Student Count:</strong> Fixed Assignments & Grades tab to show accurate unique student count instead of duplicating students across classes
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Student Template Routing:</strong> Fixed student routes to use correct unified dashboard template, resolving issue where all tabs looked the same
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Missing Class Data:</strong> Added my_classes parameter to student classes route for proper display
                            </li>
                        </ul>
                    </div>

                    <!-- New Features -->
                    <div class="update-section mb-4">
                        <h6 class="text-info mb-3">
                            <i class="fas fa-star me-2"></i>‚ú® New Features & Enhancements
                        </h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Enhanced Assignment Flow:</strong> Added popup to choose between group and individual assignments for PDF/Paper assignments
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Improved Navigation:</strong> All "Add Assignment" buttons now properly route through the assignment selector
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>High Contrast Text:</strong> Improved readability with better color combinations for badges and text
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Clean Interface:</strong> Removed redundant teacher actions from management view for streamlined experience
                            </li>
                        </ul>
                    </div>

                    <!-- Previous Bug Fixes Summary -->
                    <div class="update-section mb-4">
                        <h6 class="text-primary mb-3">
                            <i class="fas fa-bug me-2"></i>üêõ Previous Critical Fixes (100+ Issues Resolved)
                        </h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Student Assignment System:</strong> Fixed datetime comparison errors, badge visibility issues, and template rendering problems
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Teacher Attendance:</strong> Resolved template path errors and URL building issues for attendance management
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Class Management:</strong> Fixed student count calculations, teacher name display, and enrollment data consistency
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Database Operations:</strong> Resolved foreign key constraint violations and class deletion errors
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Template Rendering:</strong> Fixed all template path issues and inheritance problems across the system
                            </li>
                        </ul>
                    </div>

                    <!-- Student Experience Enhancements -->
                    <div class="update-section mb-4">
                        <h6 class="text-primary mb-3">
                            <i class="fas fa-user-graduate me-2"></i>üéì Student Experience Overhaul
                        </h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Enhanced Student Dashboard:</strong> Modern home tab with quick stats, today's schedule, and urgent assignments
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Class-Based Assignments:</strong> Beautiful assignment cards organized by class with clear status indicators
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Action Button System:</strong> View, Submit, and Extension Request buttons with smart conditional logic
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Assignment Details Modal:</strong> Comprehensive popup with instructions, due dates, and guidance
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Extension Request System:</strong> Built-in form for requesting assignment extensions
                            </li>
                        </ul>
                    </div>

                    <!-- Visual Design Revolution -->
                    <div class="update-section mb-4">
                        <h6 class="text-primary mb-3">
                            <i class="fas fa-palette me-2"></i>üé® Visual Design Revolution
                        </h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Modern UI Components:</strong> Beautiful cards, gradients, and professional styling throughout
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Color Contrast Fixes:</strong> Resolved all badge visibility and text readability issues
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Responsive Design:</strong> Optimized for all screen sizes and devices
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Interactive Elements:</strong> Hover effects, smooth transitions, and visual feedback
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Consistent Branding:</strong> Unified color scheme and design language throughout
                            </li>
                        </ul>
                    </div>

                    <!-- System Reliability -->
                    <div class="update-section mb-4">
                        <h6 class="text-primary mb-3">
                            <i class="fas fa-shield-alt me-2"></i>üõ°Ô∏è System Reliability & Stability
                        </h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Production Deployment:</strong> All fixes tested and deployed to production environment
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Database Integrity:</strong> Resolved all foreign key violations and data consistency issues
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Error Prevention:</strong> Comprehensive validation and error handling throughout
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Cross-Browser Compatibility:</strong> Tested and optimized for all major browsers
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <strong>Mobile Optimization:</strong> Touch-friendly controls and responsive layouts
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="update-footer mt-4 p-4 bg-primary text-white rounded">
                    <h6 class="mb-3">
                        <i class="fas fa-trophy me-2"></i>üéâ What This Means for You
                    </h6>
                    <div class="row">
                        <div class="col-md-4">
                            <h6 class="mb-2">For Students:</h6>
                            <ul class="list-unstyled small">
                                <li>‚Ä¢ Beautiful modern interface with purple/teal gradients</li>
                                <li>‚Ä¢ Card-based assignment view with clear status indicators</li>
                                <li>‚Ä¢ Personalized welcome and profile display</li>
                                <li>‚Ä¢ Activity timeline showing recent updates</li>
                                <li>‚Ä¢ Enhanced mobile-friendly responsive design</li>
                            </ul>
                        </div>
                        <div class="col-md-4">
                            <h6 class="mb-2">For Teachers:</h6>
                            <ul class="list-unstyled small">
                                <li>‚Ä¢ All existing functionality preserved</li>
                                <li>‚Ä¢ Enhanced visual consistency across interface</li>
                                <li>‚Ä¢ Reliable attendance tracking system</li>
                                <li>‚Ä¢ Modern class management tools</li>
                            </ul>
                        </div>
                        <div class="col-md-4">
                            <h6 class="mb-2">For Administrators:</h6>
                            <ul class="list-unstyled small">
                                <li>‚Ä¢ Completely redesigned dashboard with modern aesthetics</li>
                                <li>‚Ä¢ Color-coded tabs (gold, purple, pink gradients)</li>
                                <li>‚Ä¢ Statistics cards with real-time data</li>
                                <li>‚Ä¢ Accurate unique student counts</li>
                                <li>‚Ä¢ Enhanced attendance management interface</li>
                            </ul>
                        </div>
                    </div>
                    <div class="mt-3 p-3 bg-white bg-opacity-10 rounded">
                        <p class="mb-0 small">
                            <i class="fas fa-rocket me-2"></i>
                            <strong>Major Visual Overhaul Complete:</strong> This update represents a comprehensive redesign of the student 
                            experience and administrator tools. Every interface has been modernized with gradient designs, card-based layouts, 
                            and enhanced user experience. All changes have been thoroughly tested and are production-ready. 
                            Thank you for your patience as we continue to make Clara Science Academy's platform world-class!
                        </p>
                    </div>
                </div>
            </div>
            <div class="modal-footer bg-light">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">
                    <i class="fas fa-check me-2"></i>Awesome! Let's Go!
                </button>
            </div>
        </div>
    </div>
</div>

<script>
// ===== PREMIUM HOMEPAGE FUNCTIONALITY =====
document.addEventListener('DOMContentLoaded', function() {
    // ===== CREATE FLOATING PARTICLES =====
    function createParticles() {
        const container = document.getElementById('particlesContainer');
        if (!container) return;
        
        const particleCount = 50;
        for (let i = 0; i < particleCount; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 20 + 's';
            particle.style.animationDuration = (15 + Math.random() * 10) + 's';
            container.appendChild(particle);
        }
    }
    createParticles();
    
    // ===== ANIMATED NUMBER COUNTERS =====
    function animateCounter(element, target, duration = 2000) {
        const start = 0;
        const increment = target / (duration / 16);
        let current = start;
        
        const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
                element.textContent = target;
                clearInterval(timer);
            } else {
                element.textContent = Math.floor(current);
            }
        }, 16);
    }
    
    // Trigger counters when stat boxes come into view
    const statObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting && !entry.target.dataset.animated) {
                const numberElement = entry.target.querySelector('.stat-number');
                if (numberElement) {
                    const text = numberElement.textContent;
                    const number = parseInt(text.replace(/\D/g, ''));
                    if (number) {
                        numberElement.textContent = '0';
                        animateCounter(numberElement, number);
                        
                        // Add the + sign back if it was there
                        if (text.includes('+')) {
                            setTimeout(() => {
                                const plusSpan = document.createElement('span');
                                plusSpan.className = 'stat-plus';
                                plusSpan.textContent = '+';
                                numberElement.appendChild(plusSpan);
                            }, 2000);
                        }
                    }
                    entry.target.dataset.animated = 'true';
                }
            }
        });
    }, { threshold: 0.5 });
    
    document.querySelectorAll('.modern-stat-box').forEach(box => {
        statObserver.observe(box);
    });
    
    // ===== SLIDESHOW WITH KEN BURNS EFFECT =====
    const slideshowImages = document.querySelectorAll('.slideshow-image');
    let currentSlide = 0;
    
    function showSlide(index) {
        slideshowImages.forEach((img, i) => {
            img.classList.toggle('active', i === index);
        });
    }
    
    function nextSlide() {
        currentSlide = (currentSlide + 1) % slideshowImages.length;
        showSlide(currentSlide);
    }
    
    showSlide(0);
    setInterval(nextSlide, 6000);
    
    // ===== SMOOTH SCROLL WITH EASING =====
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            const href = this.getAttribute('href');
            if (href && href !== '#' && href.length > 1) {
                e.preventDefault();
                const target = document.querySelector(href);
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            }
        });
    });
    
    // ===== ADVANCED SCROLL ANIMATIONS =====
    const observerOptions = {
        threshold: 0.15,
        rootMargin: '0px 0px -100px 0px'
    };

    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0) scale(1)';
                
                // Add stagger effect for cards
                const cards = entry.target.querySelectorAll('.feature-card, .program-card, .modern-testimonial, .modern-contact');
                cards.forEach((card, index) => {
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0) scale(1)';
                    }, index * 100);
                });
            }
        });
    }, observerOptions);

    // Observe sections
    document.querySelectorAll('.features-section, .programs-section, .testimonials-section, .contact-section').forEach(el => {
        observer.observe(el);
    });
    
    // ===== HERO BUTTON RIPPLE EFFECT =====
    document.querySelectorAll('.hero-btn').forEach(button => {
        button.addEventListener('click', function(e) {
            const ripple = document.createElement('span');
            ripple.className = 'ripple';
            this.appendChild(ripple);
            
            setTimeout(() => ripple.remove(), 600);
        });
    });
    
    // ===== PARALLAX EFFECT ON SCROLL =====
    let ticking = false;
    window.addEventListener('scroll', function() {
        if (!ticking) {
            window.requestAnimationFrame(function() {
                const scrolled = window.pageYOffset;
                const parallaxElements = document.querySelectorAll('.hero-content');
                parallaxElements.forEach(el => {
                    el.style.transform = `translateY(${scrolled * 0.3}px)`;
                });
                ticking = false;
            });
            ticking = true;
        }
    });
    
    // ===== SHOW UPDATE MODAL =====
    if (!sessionStorage.getItem('updateModalShownNov3_2025')) {
        const updateModalElement = document.getElementById('updateModal');
        if (updateModalElement) {
            const updateModal = new bootstrap.Modal(updateModalElement);
            updateModal.show();
            sessionStorage.setItem('updateModalShownNov3_2025', 'true');
        }
    }
    
    // ===== ADD MOUSE FOLLOW EFFECT TO HERO =====
    const heroContent = document.querySelector('.hero-content');
    if (heroContent) {
        document.addEventListener('mousemove', (e) => {
            const rect = heroContent.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;
            
            const deltaX = (x - centerX) / centerX;
            const deltaY = (y - centerY) / centerY;
            
            const tiltX = deltaY * 5;
            const tiltY = -deltaX * 5;
            
            heroContent.style.transform = `perspective(1000px) rotateX(${tiltX}deg) rotateY(${tiltY}deg)`;
        });
        
        heroContent.addEventListener('mouseleave', () => {
            heroContent.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg)';
        });
    }
});
</script>


{% endblock %}