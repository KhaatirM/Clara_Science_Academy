{% extends "dashboard_layout.html" %}

{% block dashboard_content %}
<div class="container-fluid px-2 px-md-4">
    <div class="row g-3 g-md-4">
        <div class="col-12">
            <h1 class="mb-4">Tech Support Dashboard</h1>
            <div class="alert alert-info">
                <h5>Welcome, {{ current_user.username }}!</h5>
                <p>You are logged in as a Tech Support user.</p>
            </div>
            
            {% if maintenance %}
            <div class="alert alert-warning">
                <h5><i class="bi bi-exclamation-triangle"></i> Maintenance Mode Active</h5>
                <p><strong>Reason:</strong> {{ maintenance.reason }}</p>
                <p><strong>End Time:</strong> {{ maintenance.end_time.strftime('%Y-%m-%d %H:%M:%S') }}</p>
                <p><strong>Message:</strong> {{ maintenance.maintenance_message }}</p>
                <a href="{{ url_for('tech.maintenance_control') }}" class="btn btn-warning btn-sm">
                    <i class="bi bi-tools me-1"></i> Manage Maintenance
                </a>
            </div>
            {% endif %}
        </div>
    </div>

    <div class="row g-3 g-md-4">
        <div class="col-12 col-sm-6 col-lg-4">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">System Status</h5>
                </div>
                <div class="card-body d-flex flex-column">
                    <p class="flex-grow-1">Check system health and performance metrics.</p>
                    <a href="{{ url_for('tech.system_status') }}" class="btn btn-primary">View Status</a>
                </div>
            </div>
        </div>

        <div class="col-12 col-sm-6 col-lg-4">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">Activity Log</h5>
                </div>
                <div class="card-body d-flex flex-column">
                    <p class="flex-grow-1">View detailed user activity and security logs.</p>
                    <a href="{{ url_for('tech.activity_log') }}" class="btn btn-primary">View Logs</a>
                </div>
            </div>
        </div>

        <div class="col-12 col-sm-6 col-lg-4">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">User Management</h5>
                </div>
                <div class="card-body d-flex flex-column">
                    <p class="flex-grow-1">Manage user accounts and permissions.</p>
                    <a href="{{ url_for('tech.user_management') }}" class="btn btn-primary">Manage Users</a>
                </div>
            </div>
        </div>

        <div class="col-12 col-sm-6 col-lg-4">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">Error/Bug Log</h5>
                </div>
                <div class="card-body d-flex flex-column">
                    <p class="flex-grow-1">View and manage system errors and user-submitted bug reports.</p>
                    <a href="{{ url_for('tech.error_reports') }}" class="btn btn-primary">View Log</a>
                </div>
            </div>
        </div>

        <div class="col-12 col-sm-6 col-lg-4">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">System Config</h5>
                </div>
                <div class="card-body d-flex flex-column">
                    <p class="flex-grow-1">Configure system settings and parameters.</p>
                    <a href="{{ url_for('tech.system_config') }}" class="btn btn-primary">Configure</a>
                </div>
            </div>
        </div>

        <div class="col-12 col-sm-6 col-lg-4">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">Maintenance</h5>
                </div>
                <div class="card-body d-flex flex-column">
                    <p class="flex-grow-1">Control system maintenance mode.</p>
                    <a href="{{ url_for('tech.maintenance_control') }}" class="btn btn-primary">Manage</a>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">Quick Actions</h5>
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-12 col-md-6">
                            <h6>Database Operations</h6>
                            <ul class="list-unstyled">
                                <li class="mb-2">
                                    <form method="POST" action="{{ url_for('tech.backup_database') }}" class="display-inline">
                                        <button type="submit" class="btn btn-link text-decoration-none p-0">Backup Database</button>
                                    </form>
                                </li>
                                <li class="mb-2">
                                    <form method="POST" action="{{ url_for('tech.check_database_integrity') }}" class="display-inline">
                                        <button type="submit" class="btn btn-link text-decoration-none p-0">Check Database Integrity</button>
                                    </form>
                                </li>
                                <li class="mb-2">
                                    <a href="{{ url_for('tech.view_database_logs') }}" class="text-decoration-none">View Database Logs</a>
                                </li>
                            </ul>
                        </div>
                        <div class="col-12 col-md-6">
                            <h6>System Maintenance</h6>
                            <ul class="list-unstyled">
                                <li class="mb-2">
                                    <form method="POST" action="{{ url_for('tech.clear_cache') }}" class="display-inline">
                                        <button type="submit" class="btn btn-link text-decoration-none p-0">Clear Cache</button>
                                    </form>
                                </li>
                                <li class="mb-2">
                                    <form method="POST" action="{{ url_for('tech.update_system') }}" class="display-inline">
                                        <button type="submit" class="btn btn-link text-decoration-none p-0">Update System</button>
                                    </form>
                                </li>
                                <li class="mb-2">
                                    <a href="{{ url_for('tech.view_system_logs') }}" class="text-decoration-none">View System Logs</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 